<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chessrepo - Chess Games Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
    <link href="viewer/viewer.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <!-- <span class="logo-icon"><i class="bi bi-puzzle"></i></span> -->
                CHESSREPO
            </a>
            <div class="d-flex nav-btn">
                <button class="search-button rounded">
                    <i class="bi bi-search text-white"></i>
                </button>
                <button class="menu-button ms-2 rounded" id="themeToggle">
                    <i class="bi bi-gear text-white"></i>
                </button>
            </div>
        </div>
    </nav>

    <div class="container-fluid p-0">
        <div class="row g-0">
            <!-- Left column - Games list -->
            <div class="col-md-6 col-lg-5">
                <div class="filter-nav">
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">All</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Classical</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Rapid</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Blitz</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Bullet</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Chess960</a>
                        </li>
                    </ul>
                </div>

                <div class="date-navigation">
                    <button class="date-nav-button">
                        <i class="bi bi-chevron-left"></i>
                    </button>
                    <span class="current-date">10/05 SAT</span>
                    <button class="date-nav-button">
                        <i class="bi bi-chevron-right"></i>
                    </button>
                </div>

                <!-- Games grouped by event -->
                <div class="events-container">
                    <!-- Event 1 -->
                    <div class="event-header">
                        FIDE Grand Swiss
                    </div>
                    <div class="game-row active">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">10:00</div>
                            <div class="flex-grow-1">Magnus Carlsen - Hikaru Nakamura</div>
                            <div class="game-result">1-0</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">10:00</div>
                            <div class="flex-grow-1">Caruana, F - Rapport, R.</div>
                            <div class="game-result">½-½</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">10:00</div>
                            <div class="flex-grow-1">Nepomniachtchi, I - Aronian, L.</div>
                            <div class="game-result">1-0</div>
                        </div>
                    </div>

                    <!-- Event 2 -->
                    <div class="event-header">
                        Norway Chess
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">10:00</div>
                            <div class="flex-grow-1">Ding, L - Caruana, F.</div>
                            <div class="game-result">½-½</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">10:00</div>
                            <div class="flex-grow-1">Giri, A - Praggnanandhaa, R.</div>
                            <div class="game-result">0-1</div>
                        </div>
                    </div>

                    <!-- Event 3 -->
                    <div class="event-header">
                        Sinquefield Cup
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">11:30</div>
                            <div class="flex-grow-1">Gukesh, D. - So, W.</div>
                            <div class="game-result">1-0</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">11:30</div>
                            <div class="flex-grow-1">Mamedyarov, S - Dominguez, L.</div>
                            <div class="game-result">½-½</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">11:30</div>
                            <div class="flex-grow-1">Abdusattorov, N - Erigaisi, A.</div>
                            <div class="game-result">0-1</div>
                        </div>
                    </div>

                    <!-- Event 4 -->
                    <div class="event-header">
                        Prague Masters
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">11:30</div>
                            <div class="flex-grow-1">Firouzja, A - Duda, J.</div>
                            <div class="game-result">½-½</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">11:30</div>
                            <div class="flex-grow-1">Keymer, V - Vidit, S.</div>
                            <div class="game-result">1-0</div>
                        </div>
                    </div>

                    <!-- Event 5 -->
                    <div class="event-header">
                        Chess960 Championship
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">13:00</div>
                            <div class="flex-grow-1">Aronian, L - Nepomniachtchi, I.</div>
                            <div class="game-result">½-½</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">13:00</div>
                            <div class="flex-grow-1">Wei, Y - Vachier-Lagrave, M.</div>
                            <div class="game-result">0-1</div>
                        </div>
                    </div>

                    <!-- Event 6 -->
                    <div class="event-header">
                        Bullet Online Challenge
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">13:00</div>
                            <div class="flex-grow-1">Niemann, H - Tari, A.</div>
                            <div class="game-result">1-0</div>
                        </div>
                    </div>
                    <div class="game-row">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="game-time">13:00</div>
                            <div class="flex-grow-1">Andreikin, D - Dubov, D.</div>
                            <div class="game-result">½-½</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right column - Chess board (fixed) -->
            <div class="col-md-6 col-lg-7 d-none d-md-block">
                <div class="chess-board-section">
                    <div class="chess-board-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1">Carlsen, M vs Nakamura, H.</h6>
                                <div class="small">FIDE Grand Swiss</div>
                            </div>
                            <span class="badge bg-secondary">1-0</span>
                        </div>
                    </div>
                    
                    <div class="chess-board-container">
                        <div class="game-metadata">
                            <div class="metadata-item">
                                <div class="metadata-label">Opening:</div>
                                <div>Sicilian Defense: Najdorf Variation</div>
                            </div>
                            <div class="metadata-item">
                                <div class="metadata-label">Site:</div>
                                <div>Douglas, Isle of Man</div>
                            </div>
                        </div>
                        <div class="game-action-buttons">
                            <button class="action-button">
                                Share
                            </button>
                            <button class="action-button">
                                Analyze
                            </button>
                        </div>
                        <div class="board-container col-md-10">
                            <div class="game-position" data-pgn='[Event "Live Chess - Chess960"]
                            [Site "Chess.com"]
                            [Date "2025.05.09"]
                            [Round "-"]
                            [White "wonderfultime"]
                            [Black "HatvSp923"]
                            [Result "1-0"]
                            [Variant "Chess960"]
                            [SetUp "1"]
                            [FEN "rbbkrqnn/pppppppp/8/8/8/8/PPPPPPPP/RBBKRQNN w EAea - 0 1"]
                            [Tournament "https://www.chess.com/tournament/live/freestyle-friday-may-09-2025-5632459"]
                            [CurrentPosition "3r4/5p2/N2P1kp1/1p2qp1p/p1pQp2P/P1P3P1/1P6/1K1R1R2 b - - 0 44"]
                            [Timezone "UTC"]
                            [ECO "D00"]
                            [ECOUrl "https://www.chess.com/openings/Queens-Pawn-Opening-1...d5-2.c3-Nf6"]
                            [UTCDate "2025.05.09"]
                            [UTCTime "15:09:25"]
                            [WhiteElo "2398"]
                            [BlackElo "1732"]
                            [TimeControl "180+1"]
                            [Termination "wonderfultime won by resignation"]
                            [StartTime "15:09:25"]
                            [EndDate "2025.05.09"]
                            [EndTime "15:16:53"]
                            [Link "https://www.chess.com/game/live/141117074703"]
                            
                            1. d4 { [%clk 0:02:59.4] } 1... d5 { [%clk 0:02:27.8] } 2. c3 { [%clk 0:02:55.5] } 2... Nf6 { [%clk 0:02:23.9] } 3. Nf3 { [%clk 0:02:51.5] } 3... Ng6 { [%clk 0:02:09.3] } 4. Ng3 { [%clk 0:02:49.1] } 4... c6 { [%clk 0:02:05.3] } 5. Bg5 { [%clk 0:02:10.6] } 5... Bg4 { [%clk 0:01:33.2] } 6. Nd2 { [%clk 0:01:55] } 6... h6 { [%clk 0:01:23.3] } 7. Bxf6 { [%clk 0:01:53.7] } 7... exf6 { [%clk 0:01:02.2] } 8. h3 { [%clk 0:01:54.2] } 8... Be6 { [%clk 0:00:57.7] } 9. Bc2 { [%clk 0:01:46.6] } 9... a5 { [%clk 0:00:53.3] } 10. O-O-O { [%clk 0:01:37.8] } 10... a4 { [%clk 0:00:53.1] } 11. a3 { [%clk 0:01:37.5] } 11... Bd6 { [%clk 0:00:51.6] } 12. Nb1 { [%clk 0:01:36] } 12... Qe7 { [%clk 0:00:49.6] } 13. e3 { [%clk 0:01:29.9] } 13... Qc7 { [%clk 0:00:48.2] } 14. Nf5 { [%clk 0:01:29.7] } 14... Bxf5 { [%clk 0:00:45.4] } 15. Bxf5 { [%clk 0:01:30.6] } 15... Ne7 { [%clk 0:00:45.4] } 16. Bc2 { [%clk 0:01:28.7] } 16... O-O { [%clk 0:00:44.3] } 17. Qd3 { [%clk 0:01:28.9] } 17... g6 { [%clk 0:00:42.5] } 18. h4 { [%clk 0:01:29.1] } 18... h5 { [%clk 0:00:36] } 19. Nd2 { [%clk 0:01:26] } 19... f5 { [%clk 0:00:35.1] } 20. f3 { [%clk 0:01:20.2] } 20... Bg3 { [%clk 0:00:34.1] } 21. Rh1 { [%clk 0:01:20.9] } 21... b5 { [%clk 0:00:33] } 22. Nf1 { [%clk 0:01:14.6] } 22... Rfe8 { [%clk 0:00:27.7] } 23. f4 { [%clk 0:01:14.7] } 23... Bxf4 { [%clk 0:00:18.8] } 24. exf4 { [%clk 0:01:15.6] } 24... Qxf4+ { [%clk 0:00:19.1] } 25. Qd2 { [%clk 0:01:16.2] } 25... Qd6 { [%clk 0:00:17.3] } 26. Nh2 { [%clk 0:01:14.5] } 26... Kg7 { [%clk 0:00:17] } 27. Nf3 { [%clk 0:01:15.1] } 27... Ng8 { [%clk 0:00:17.6] } 28. Rde1 { [%clk 0:00:19.9] } 28... Nf6 { [%clk 0:00:17.6] } 29. Rhf1 { [%clk 0:00:19.7] } 29... Ne4 { [%clk 0:00:16.5] } 30. Bxe4 { [%clk 0:00:20.3] } 30... dxe4 { [%clk 0:00:17.1] } 31. Ng5 { [%clk 0:00:20.7] } 31... Qd5 { [%clk 0:00:17.1] } 32. Kb1 { [%clk 0:00:20.7] } 32... c5 { [%clk 0:00:16.4] } 33. Rd1 { [%clk 0:00:20.4] } 33... c4 { [%clk 0:00:15] } 34. Nh3 { [%clk 0:00:20.6] } 34... Ra6 { [%clk 0:00:13.9] } 35. Nf4 { [%clk 0:00:20.8] } 35... Qd7 { [%clk 0:00:12.6] } 36. d5 { [%clk 0:00:21.4] } 36... Qd6 { [%clk 0:00:12.1] } 37. Qe3 { [%clk 0:00:21.7] } 37... Qe5 { [%clk 0:00:12] } 38. g3 { [%clk 0:00:21.6] } 38... Rd8 { [%clk 0:00:12.2] } 39. Qc5 { [%clk 0:00:20.6] } 39... Rb8 { [%clk 0:00:10.5] } 40. Qd4 { [%clk 0:00:14.2] } 40... Kf6 { [%clk 0:00:09.6] } 41. d6 { [%clk 0:00:13.7] } 41... Rd8 { [%clk 0:00:08.5] } 42. Nd5+ { [%clk 0:00:13.2] } 42... Ke6 { [%clk 0:00:08.9] } 43. Nc7+ { [%clk 0:00:13.5] } 43... Kf6 { [%clk 0:00:09.4] } 44. Nxa6 { [%clk 0:00:13.3] } 1-0'>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script type="module">
        import LichessPgnViewer from '/viewer/viewer.js';
    
        function initializeViewers(container = document, onlyNew = false) {
            const elements = container.querySelectorAll('.game-position');
    
            elements.forEach((element) => {
                // Skip if we're only processing new elements and this one was already processed
                if (onlyNew && processedElements.has(element)) {
                    return;
                }
    
                const pgn = element.getAttribute('data-pgn');
                if (pgn) {
                    // Initialize the viewer
                    LichessPgnViewer(element, {
                        pgn: pgn,
                        showMoves: 'auto',
                        initialPly: 'last',
                        showPlayers: true,
                        showClocks: true,
                        showControls: true,
                        orientation: undefined,
                        chessground: {
                            movable: { free: false }
                        }
                    });
                }
            });
        }
    
        document.addEventListener('DOMContentLoaded', function() {
            // Initial load - process all existing elements
            initializeViewers();
        });
    </script>
</body>
</html>